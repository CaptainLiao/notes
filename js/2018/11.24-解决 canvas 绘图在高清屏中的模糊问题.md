## 解决 canvas 绘图在高清屏中的模糊问题
````js
function setupCanvas(canvas) {
  var dpr = window.devicePixelRatio || 1
  var rect = canvas.getBoundingClientRect()

  canvas.width = rect.width * dpr
  canvas.height = rect.height * dpr

  var ctx = canvas.getContext('2d')
  ctx.scale(dpr, dpr)

  return ctx
}

// 现在我们只需要根据 UI 设计图绘制需要的内容
// 由于使用了 setupCanvas，绘制的内容在各种高清屏中表现清晰、一致
var ctx = setupCanvas(document.querySelector('.my-canvas'));
ctx.lineWidth = 5;
ctx.beginPath();
ctx.moveTo(100, 100);
ctx.lineTo(200, 200);
ctx.stroke();
````

### 术语
#### device pixel
设备像素(又称物理像素、屏幕像素)是**显示屏的最小物理单元**，是我们在**屏幕上**能看到的最小点。

#### device-independent pixel
设备无关像素(又称密度无关像素，DIP)是一个**抽象单位**，表示计算机中的一个虚拟点，由系统转为一个设备像素点。

#### devicePixelRatio
设备像素比，它的值等于设备像素/设备无关像素，devicePixelRatio = DP/DIP

#### css pixel
css 像素是浏览器使用的抽象单位，属于设备无关像素(DIP)。我们看到的内容，是浏览器将 css 像素转化为设备像素后的结果。





#### 引用
* [SVG rendered into canvas blurred on retina display](https://stackoverflow.com/questions/41763580/svg-rendered-into-canvas-blurred-on-retina-display)
* [High DPI Canvas](https://www.html5rocks.com/en/tutorials/canvas/hidpi/)
* [高清屏中 Canvas 的绘制](https://objcer.com/2017/10/10/High-DPI-Canvas-Render/)

