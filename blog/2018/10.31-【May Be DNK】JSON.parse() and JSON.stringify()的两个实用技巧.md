## ç»“è®º

### ä¸€ã€æ•°æ®æ·±æ‹·è´

ä½¿ç”¨æ–¹æ³•ï¼š`JSON.parse(JSON.stringify(param))`

````
let o = {a: 1, b: 2}
let o1 = JSON.parse(JSON.stringify(o))
let o2 = o

console.log(o === o2) // true
console.log(o === o1) // false
````

### äºŒã€æ•°æ®è¿‡æ»¤

å¯¹ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè­¬å¦‚è¿‡æ»¤æ‰å¯¹è±¡ä¸­å€¼ä¸ºnull/undefinedçš„é”®ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç”¨`Object.keys()`é€ä¸ªéå†`key`ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š

````
let o = {
    a: 1,
    b: null,
    c: 'hello'
}

let replacer = (k, v) => {if (v) return v})

let s = JSON.stringify(o, replacer)
let res = JSON.parse(s)

> res
< {a: 1, c: "hello"}

// æˆ–è€…
s = JSON.stringify(o)
res = JSON.parse(s, replacer)

> res
< {a: 1, c: "hello"}
````

## è¯¦ç»†ä»‹ç»

`JSON`ï¼Œå…¨ç§°æ˜¯`JavaScript Object Notation`ï¼ˆJavaScript å¯¹è±¡è¡¨ç¤ºæ³•ï¼‰ï¼Œæ˜¯ä¸€ç§è½»é‡ã€å¯è¯»æ€§é«˜çš„æ•°æ®ç»“æ„ã€‚

å’Œ`XML`ç±»ä¼¼ï¼Œå®ƒä¸»è¦ç”¨äºæœåŠ¡å™¨å’Œwebåº”ç”¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚

### é”®å€¼å¯¹(Keys and Values)

æ„æˆJSONçš„ä¸¤ä¸ªé‡è¦éƒ¨åˆ†æ˜¯é”®å’Œå€¼ã€‚å®ƒä»¬ä¸€èµ·ç»„æˆä¸€ä¸ªé”®å€¼å¯¹ï¼š
    **Keyï¼š**ä¸€ä¸ªé”®é€šå¸¸è¢«ä¸€å¯¹åŒå¼•å·åŒ…è£¹ä½ã€‚
    **Valueï¼š** æœ‰æ•ˆå€¼æ˜¯string, number, array, object, null, false, trueä¸­çš„ä¸€ç§ï¼ˆ**æ— undefined**ï¼‰ã€‚
    **Key/Value Pairï¼š**é”®å€¼å¯¹éµå¾ªç‰¹å®šçš„è¯­æ³•ï¼Œè¡Œå¦‚`key: value`ï¼Œé”®å€¼å¯¹ä»¥é€—å·åˆ†éš”ã€‚

JavaScript ä¸­çš„JSONå¯¹è±¡æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼šparseã€stringifyï¼Œç”¨æ¥å¤„ç†JSONæ ¼å¼çš„æ•°æ®ã€‚

#### 1.JSON.stringify(value[, replacer[, space]])

JSON.stringify() å°†ä¸€ä¸ª JavaScript å¯¹è±¡è½¬åŒ–æˆä¸€ä¸ª JSON å­—ç¬¦ä¸²ã€‚

stringify å‡½æ•°æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼šreplacer and space.

````
// converting a simple javascript object to JSON object
let my_details =  {
    "name"  : "John",
    "age "  : "31" ,
    "photo" : "ğŸ¤ª"
}

let my_details_in_json = JSON.stringify(my_details);

// "{"name":"John","age ":"31","photo":"ğŸ¤ª"}" --> my_details_in_json

````

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è½¬åŒ–æ•°ç»„ï¼š
````
let  my_details = ['John ', 31, 'ğŸ¤ª'];  

const myJSONdetails = JSON.stringify(my_details);  

// "["John ",31,"ğŸ¤ª"]" --> myJSONdetails

````

**replacer**å‚æ•°å¯ä»¥é€‰æ‹©å‡½æ•°æˆ–è€…æ•°ç»„ã€‚

**ä½œä¸ºå‡½æ•°â€”â€”>**Replaceræœ‰ä¸¤ä¸ªå‚æ•°ï¼šè¢«å­—ç¬¦ä¸²åŒ–çš„ `key`å’Œ`value`.

````
// in this example we will convert small letters to capital letters

function replacer(key, value) {
    if (typeof value === 'string') {
        return value.toUpperCase();
    }
    return value;
}

let my_details =   {
    "name"  : "john",
    "age "  : "31" ,
    "photo" : "ğŸ¤ª"
 }

JSON.stringify(my_details, replacer);

> "{"name"  : "JOHN", "age "  : "31" , "photo" : "ğŸ¤ª"}"

````

**ä½œä¸ºæ•°ç»„â€”â€”>**Replacerä¸­çš„å€¼ä¸ç»“æœä¸­çš„keyå€¼ä¸€ä¸€å¯¹åº”ï¼Œå¤šä½™çš„key/valueå°†è¢«å‰”é™¤ã€‚
````
let replacer = ["name" , "age" ];

let my_details =  {
    "name"  : "john",
    "age"  : "31" ,
    "photo" : "ğŸ¤ª"
};

JSON.stringify(my_details, replacer);

> "{"name": "john", "age": "31"}"
````

**space **å‚æ•°ç»“æœå­—ç¬¦ä¸²ä¸­çš„é—´è·ï¼Œå®ƒçš„å€¼ç±»å‹ä¸ºå­—ç¬¦ä¸²/æ•°å­—ã€‚ä¸å¸¸ç”¨ã€‚

#### 2. JSON.parse(JSONObject,[,reviver] )

æ­¤æ–¹æ³•ç”¨äºè§£æJSONå­—ç¬¦ä¸²æ•°æ®ä¸ºä¸€ä¸ªJavaScriptå¯¹è±¡ã€‚

````
// converting a simple javascript object to JSON object

let my_details =  {
    "name"  : "John",
    "age "  : "31" ,
    "photo" : "ğŸ¤ª"
 }

let my_details_in_json = JSON.stringify(my_details);

// "{"name":"John","age ":"31","photo":"ğŸ¤ª"}" --> my_details_in_json

let parsedData = JSON.parse(my_details_in_json);

output 
           "age "  :"31",
           "name"  :"John",
           "photo" :"ğŸ¤ª"

````

JSON.parse() å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‡½æ•° (reviver) ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œæ”¹å˜è¿”å›å¯¹è±¡ä¸­çš„å€¼ã€‚

````
JSON.parse(my_details_in_json , function (key, value) { 
    if (typeof value === â€˜stringâ€™) { 
        return value.toUpperCase(); 
    } 
    return value; 
 });
````

å‚è€ƒï¼š

https://www.json.org/

https://medium.com/mindorks/json-parse-and-json-stringify-in-javascript-4de609c19d46



.