## 说在前面
咱们经常在网络上花钱看书、看资料，然而很快就会忘记。但既然花了钱，就总得留下点啥，不然真对不住那些白花花的银子。俗话说“好记性不如烂笔头”，咱们就写一写读书笔记/感想，权当是回本了。

所以就有了极客时间专栏《浏览器工作原理与实践》读书笔记。


## 01-Chrome架构：仅仅打开了1个⻚⾯，为什么有4个进程？
这个标题就非常硬核，关键词“架构”、“进程”，咱们一看就要被唬住——啥是进程？

### 进程和线程
这两个词汇通常一起出现，比较容易混淆。往简单了说，进程是一个程序的运行环境，它包含一个或多个线程。进程相互隔离，而线程之间则可以共享数据、相互通信。

### 多进程浏览器

#### 浏览器进程。
主要负责界⾯显⽰、⽤⼾交互、⼦进程管理，同时提供存储等功能。

#### 渲染进程
核⼼任务是将 HTML、CSS和JavaScript转换为⽤⼾可以与之交互的⽹⻚，排版引擎Blink和
JavaScript引擎V8都是运⾏在该进程中，默认情况下，Chrome会为每个Tab标签创建⼀个渲染进程。出于安全考虑，渲染进程都是运⾏在沙箱模式下。

#### GPU进程。
其实，Chrome刚开始发布的时候是没有GPU进程的。⽽GPU的使⽤初衷是为了实现3D CSS的效果，只是随后⽹⻚、Chrome的UI界⾯都选择采⽤GPU来绘制，这使得GPU成为浏览器普遍的需求。最后，Chrome在其多进程架构上也引⼊了GPU进程。

#### ⽹络进程。
主要负责⻚⾯的⽹络资源加载，之前是作为⼀个模块运⾏在浏览器进程⾥⾯的，直⾄最近才独⽴出来，成为⼀个单独的进程。

#### 插件进程。
主要是负责插件的运⾏，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和⻚⾯造成影响。

## 02-TCP/IP 协议
参考：10/19《网络是怎样连接的》

## 03-HTTP请求流程：为什么很多站点第⼆次打开速度会很快？
### 浏览器端发起HTTP请求流程
1. 构建请求
````
GET /index.html HTTP1.1
````
2. 查找缓存
3. 准备IP地址和端口
   1. 域名解析获得 IP 地址
   2. 通过 url 获取端口
4. 等待TCP队列（一般最多允许 6 个并发请求）
5. 建立TCP连接
6. 发送HTTP请求

### 服务器处理HTTP请求流程
1. 返回请求
2. 断开连接
3. (可能的)重定向

### 如果⼀个⻚⾯的⽹络加载时间过久，如何分析卡在哪个阶段的？
1. ⾸先猜测最可能的出问题的地⽅，⽹络传输丢包⽐较严重，需要不断重传。然后通过ping curl看看对应的时延⾼不⾼。
2. 然后通过wireshake看看具体哪⾥出了问题。
3. 假如别⼈访问很快，⾃⼰电脑很慢，就要看看⾃⼰客户端是否有问题了。
4. 打开network查看timing tab应该能看到⼀部分⽹络耗时情况

## 04-导航流程：从输⼊URL到⻚⾯展⽰，这中间发⽣了什么？